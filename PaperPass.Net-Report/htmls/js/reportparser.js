function sentenceContent(e,a){var n=parseSentence(e[a%200]);var i=template("similar-template",n);$("#detail-right").hide();$(".logo_right").hide();$(".sentence-detail").html(i).show();$("body").scrollTop(0)}function parseSentence(e){var n=localCount=periodicalCount=degreeCount=conferenceCount=bookCount=netCount=otherCount=sbCount=0;var i=[];e.result.forEach(e=>{n++;var a={score:Math.round(e.score*100),similaritySegGreyList:e.similaritySegGreyList,originalSegGreyList:e.originalSegGreyList,similaritySentence:e.similaritySentence,subSimilaritySentenceSection:e.subSimilaritySentenceSection,simpleDetailJson:e.duplicateSourceMD5,articleType:e.articleType!="net"?e.articleType:"互联网",classification:e.classification,paperPassId:e.duplicateSourceMD5};if(a.articleType=="OpenSearch")a.articleType="自建库";if(e.classification=="local"||e.classification=="OpenSearch"){localCount++;switch(e.articleType){case"学术期刊":periodicalCount++;a.source='<span data-lang="Journal">Journal</span>';a.title=JSON.parse(simSource[e.duplicateSourceMD5]).title;a.simpleDetailJson=SentenceDetailParser.parsePeriodical(simSource[e.duplicateSourceMD5]);break;case"书籍数据":bookCount++;a.source='<span data-lang="BookData">Book Data</span>';a.simpleDetailJson=SentenceDetailParser.parseBook(simSource[e.duplicateSourceMD5]);break;case"学位论文":degreeCount++;a.source='<span data-lang="Dissertation">Dissertation</span>';a.simpleDetailJson=SentenceDetailParser.parseThesis(simSource[e.duplicateSourceMD5]);break;case"学术会议":conferenceCount++;a.source='<span data-lang="AcademicConferences">Academic Conferences</span>';a.simpleDetailJson=SentenceDetailParser.parseConference(simSource[e.duplicateSourceMD5]);break;case"自建库":sbCount++;a.source='<span data-lang="SelfBuiltLibrary">Self-built Library</span>';a.simpleDetailJson=SentenceDetailParser.parseSelfBuild(simSource[e.duplicateSourceMD5]);break;case"foreignOthers":otherCount++;a.source="<span>"+JSON.parse(simSource[e.duplicateSourceMD5]).articleType==""?"Other":JSON.parse(simSource[e.duplicateSourceMD5]).articleType+"</span>";a.title=JSON.parse(simSource[e.duplicateSourceMD5]).title;a.simpleDetailJson=SentenceDetailParser.parseOther(simSource[e.duplicateSourceMD5]);break}}else if(e.classification=="net"){netCount++;a.source='<span data-lang="Internet">Internet</span>';a.chuChu=JSON.parse(simSource[e.duplicateSourceMD5]).chuchu;a.title=JSON.parse(simSource[e.duplicateSourceMD5]).title}i.push(a)});if(n>0){var a={total:n,local:localCount,periodical:periodicalCount,degree:degreeCount,conference:conferenceCount,book:bookCount,net:netCount,sb:sbCount,other:otherCount,data:i}}a.content=e.content;a.score=Math.round(e.result[0].score*100);if(e.result[0].score>=.4){a.synonymsContent=e.synonymsContent;a.segRedList=e.segRedList;a.newSegRedList=e.result[0].originalSegGreyList}return a}function wordsColor(e,o,a){var n="";var c=0;var u=false;var l=[];e.forEach(e=>{for(const p in e){if(Object.hasOwnProperty.call(e,p)){var a=e[p];var n=p;var i=n.length;var s=o.indexOf(n,c);if(s!==false&&s>=c){var t=s-c;if(t!=0){var r=o.substr(c,t);if(a=="1"&&u){l.push({s:r,c:true})}else{l.push({s:r,c:false})}c+=t}if(a=="1"){l.push({s:n,c:true});u=true}else{l.push({s:n,c:false});u=false}c+=i}}}});var i="";l.forEach(e=>{if(e["c"]){i=i+e["s"]}else{if(i!=""){n=n+a.replace("{%s}",i);i=""}n+=e["s"]}});if(i!=""){n=n+a.replace("{%s}",i)}return n}function subSimilaritySection(e,a){return e.replace(a,'<span class="g-font-color green">'+a+"</span>")}function scoreColor(e){if(e<40){return"green"}else if(e>=70){return"red"}else{return"orange"}}function issetString(e){if(typeof e!=="undefined"&&e!=""){return true}else{return false}}function issetArray(e){if(typeof e!=="undefined"&&e.length!=0){return true}else{return false}}var SentenceDetailParser={parsePeriodical:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.chuchu)){a+='<div><span data-lang="Periodical">Periodical</span> : <span>'+e.chuchu+"</span></div>"}if(issetString(e.year)){var n='<span data-lang="Issue">Issue</span> :  <span>'+e.year+"</span>";if(issetString(e.issue)){n+=",<span>"+e.issue+"</span>"}a+="<div>"+n+"</div>"}if(issetString(e.column)){a+='<div><span data-lang="PeriodicalColumn">Periodical Column</span> : <span>'+e.column+"</span></div>"}if(issetString(e.page)){a+='<div><span data-lang="PageNumber">Page Number</span> : <span>'+e.page+"</span></div>"}if(issetString(e.pageNum)){a+='<div><span data-lang="NumberOfPages">Number Of Pages</span> : <span>'+e.pageNum+"</span></div>"}if(issetString(e.cLCNumber)){a+='<div><span data-lang="ClassificationNumber">Classification Number</span> : <span>'+e.cLCNumber+"</span></div>"}if(issetArray(e.fundInfo)){a+='<div><span data-lang="Funding">Funding</span> : <span>'+e.fundInfo.toString()+"</span></div>"}if(issetString(e.publicationDate)){a+='<div><span data-lang="PublicationDate">Publication Date</span> : <span>'+e.publicationDate+"</span></div>"}var i=[];if(!(typeof e.isCoreISTIC=="undefined")&&e.isCoreISTIC==1){i.push("ISTIC")}if(!(typeof e.isCoreNJU=="undefined")&&e.isCoreNJU==1){i.push("CSSCI")}if(!(typeof e.isCorePKU=="undefined")&&e.isCorePKU==1){i.push("PKU")}if(!(typeof e.isCoreSCI=="undefined")&&e.isCoreSCI==1){i.push("SCI")}if(!(typeof e.isCoreEI=="undefined")&&e.isCoreEI==1){i.push("EI")}if(i.length!=0){a+='<div><span data-lang="PeriodicalLevel">Periodical Level</span> : <span>'+i.toString()+"</span></div>"}if(issetString(e.iSSN)){a+='<div><span data-lang="ISSN">ISSN</span> : <span>'+e.iSSN+"</span></div>"}return a}},parseThesis:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.chuchu)){a+='<div><span data-lang="DegreeGrantingUnit">Degree Awarded Institution</span> : <span>'+e.chuchu+"</span></div>"}if(issetString(e.year)){a+='<div><span data-lang="DegreeYear">Degree Year</span> : <span>'+e.year+"</span></div>"}if(issetString(e.degree)){a+='<div><span data-lang="DegreeAwarded">Degree Awarded</span> : <span>'+e.degree+"</span></div>"}if(issetString(e.cLCNumber)){a+='<div><span data-lang="ClassificationNumber">Classification Number</span> : <span>'+e.cLCNumber+"</span></div>"}if(issetArray(e.authorSubject)){a+='<div><span data-lang="Major">Major</span> : <span>'+e.authorSubject+"</span></div>"}if(issetArray(e.teacherName)){a+='<div><span data-lang="TeacherName">Teacher Name</span> : <span>'+e.teacherName.toString()+"</span></div>"}return a}},parseConference:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.conference)){a+='<div><span data-lang="Conference">Conference</span> : <span>'+e.conference+"</span></div>"}if(issetArray(e.convener)){a+='<div><span data-lang="Organizer">Organizer</span> : <span>'+e.convener.toString()+"</span></div>"}if(issetString(e.conferenceDate)){a+='<div><span data-lang="ConferenceDate">Conference Date</span> : <span>'+e.conferenceDate+"</span></div>"}if(issetString(e.conferenceLocus)){a+='<div><span data-lang="ConferenceLocation">Conference Location</span> : <span>'+e.conferenceLocus+"</span></div>"}return a}},parseBook:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.category)){a+='<div><span data-lang="Chapter">Chapter</span> : <span>'+e.category+"</span></div>"}if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.publisher)){a+='<div><span data-lang="Publisher">Publisher</span> : <span>'+e.publisher+"</span></div>"}if(issetString(e.publicationDate)){a+='<div><span data-lang="PublicationDate">Publication Date</span> : <span>'+e.publicationDate+"</span></div>"}if(issetString(e.iSBN)){a+='<div><span data-lang="ISBN">ISBN</span> : <span>'+e.iSBN+"</span></div>"}return a}},parseSelfBuild:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.publicationDate)){a+='<div><span data-lang="PublicationDate">Publication Date</span> : <span>'+e.publicationDate+"</span></div>"}if(issetArray(e.chuchu)){a+='<div><span data-lang="Provenance">Origin</span> : <span>'+e.chuchu+"</span></div>"}return a}},parseOther:function(e){if(issetString(e)){var a="";e=JSON.parse(e);if(issetString(e.title)){a+='<div><span data-lang="Title">Title</span> : <span>'+e.title+"</span></div>"}if(issetArray(e.author)){a+='<div><span data-lang="Author">Author</span> : <span>'+e.author.toString()+"</span></div>"}if(issetString(e.chuchu)){a+='<div><span data-lang="SourceName">Source Name</span> : <span>'+e.chuchu+"</span></div>"}if(issetString(e.year)){var n='<span data-lang="Issue">Issue</span> :  <span>'+e.year+"</span>";if(issetString(e.issue)){n+=",<span>"+e.issue+"</span>"}a+="<div>"+n+"</div>"}if(issetString(e.column)){a+='<div><span data-lang="PeriodicalColumn">Periodical Column</span> : <span>'+e.column+"</span></div>"}if(issetString(e.page)){a+='<div><span data-lang="PageNumber">Page Number</span> : <span>'+e.page+"</span></div>"}return a}}};